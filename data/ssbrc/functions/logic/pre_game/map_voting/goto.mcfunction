kill @e[type=!minecraft:player]
clear @a

scoreboard players reset @a useAbility
scoreboard players reset @a menu

summon minecraft:glow_item_frame -3.5 5.0 19.5 {Fixed:1b,Facing:5b,Item:{id:"minecraft:feather",tag:{CustomModelData:1},Count:1b}}
summon minecraft:glow_item_frame -3.5 5.0 25.5 {Fixed:1b,Facing:5b,Item:{id:"minecraft:feather",tag:{CustomModelData:2},Count:1b}}
summon minecraft:glow_item_frame 5.5 5.0 14.5 {Fixed:1b,Facing:3b,Item:{id:"minecraft:feather",tag:{CustomModelData:3},Count:1b}}
summon minecraft:glow_item_frame 7.5 5.0 14.5 {Fixed:1b,Facing:3b,Item:{id:"minecraft:feather",tag:{CustomModelData:4},Count:1b}}
summon minecraft:glow_item_frame -3.5 5.0 17.5 {Fixed:1b,Facing:5b,Item:{id:"minecraft:feather",tag:{CustomModelData:5},Count:1b}}
summon minecraft:glow_item_frame -0.5 5.0 28.5 {Fixed:1b,Facing:2b,Item:{id:"minecraft:feather",tag:{CustomModelData:6},Count:1b}}
summon minecraft:glow_item_frame 10.5 5.0 23.5 {Fixed:1b,Facing:4b,Item:{id:"minecraft:feather",tag:{CustomModelData:7},Count:1b}}
summon minecraft:glow_item_frame 10.5 5.0 17.5 {Fixed:1b,Facing:4b,Item:{id:"minecraft:feather",tag:{CustomModelData:8},Count:1b}}
summon minecraft:glow_item_frame -3.5 5.0 23.5 {Fixed:1b,Facing:5b,Item:{id:"minecraft:feather",tag:{CustomModelData:9},Count:1b}}
summon minecraft:glow_item_frame 10.5 5.0 19.5 {Fixed:1b,Facing:4b,Item:{id:"minecraft:feather",tag:{CustomModelData:10},Count:1b}}
summon minecraft:glow_item_frame 1.5 5.0 14.5 {Fixed:1b,Facing:3b,Item:{id:"minecraft:feather",tag:{CustomModelData:11},Count:1b}}
summon minecraft:glow_item_frame 3.5 5.0 14.5 {Fixed:1b,Facing:3b,Item:{id:"minecraft:feather",tag:{CustomModelData:12},Count:1b}}
summon minecraft:glow_item_frame 3.5 5.0 28.5 {Fixed:1b,Facing:2b,Item:{id:"minecraft:feather",tag:{CustomModelData:13},Count:1b}}
summon minecraft:glow_item_frame 7.5 5.0 28.5 {Fixed:1b,Facing:2b,Item:{id:"minecraft:feather",tag:{CustomModelData:14},Count:1b}}
summon minecraft:glow_item_frame 5.5 5.0 28.5 {Fixed:1b,Facing:2b,Item:{id:"minecraft:feather",tag:{CustomModelData:15},Count:1b}}
summon minecraft:glow_item_frame 1.5 5.0 28.5 {Fixed:1b,Facing:2b,Item:{id:"minecraft:feather",tag:{CustomModelData:16},Count:1b}}
summon minecraft:glow_item_frame 10.5 5.0 25.5 {Fixed:1b,Facing:4b,Item:{id:"minecraft:feather",tag:{CustomModelData:17},Count:1b}}
summon minecraft:glow_item_frame -0.5 5.0 14.5 {Fixed:1b,Facing:3b,Item:{id:"minecraft:feather",tag:{CustomModelData:18},Count:1b}}
summon minecraft:glow_item_frame 10.5 5.0 21.5 {Fixed:1b,Facing:4b,Item:{id:"minecraft:feather",tag:{CustomModelData:19},Count:1b}}
summon minecraft:glow_item_frame -3.5 5.0 21.5 {Fixed:1b,Facing:5b,Item:{id:"minecraft:feather",tag:{CustomModelData:20},Count:1b}}

summon minecraft:area_effect_cloud -3.5 5.0 19.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","battlefield"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud -3.5 5.0 25.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","castleSiege"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud 5.5 5.0 14.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","draculasCastle"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud 7.5 5.0 14.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","dreamLand"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud -3.5 5.0 17.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","finalDestination"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud -0.5 5.0 28.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","flatZone"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud 10.5 5.0 23.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","gardenOfHope"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud 10.5 5.0 17.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","greatBay"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud -3.5 5.0 23.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","greatPlateau"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud 10.5 5.0 19.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","greenHillZone"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud 1.5 5.0 14.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","icicleMountain"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud 3.5 5.0 14.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","jungleJapes"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud 3.5 11.0 14.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","luigisMansion"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud 3.5 5.0 28.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","magicant"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud 7.5 5.0 28.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","mementos"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud -0.5 11.0 14.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","miiverse"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud 5.5 5.0 28.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","mushroomKingdom"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud 1.5 5.0 28.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","saturnValley"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud 10.5 5.0 25.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","sectorZ"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud -0.5 5.0 14.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","shadowMosesIsland"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud 10.5 5.0 21.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","spearPillar"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud 10.5 11.0 21.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","towerOfFate"],CustomNameVisible:1b}
summon minecraft:area_effect_cloud -3.5 5.0 21.5 {Age:-2147483648,Duration:-1,WaitTime:-2147483648,Tags:["voteCounter","wilyCastle"],CustomNameVisible:1b}

scoreboard players set @e[tag=voteCounter] mapVote 0

execute as @e[tag=voteCounter] unless score @s mapVote = @s temp run tag @s add voteCounter.update
execute as @e[tag=voteCounter.update,sort=random,limit=1] run function ssbrc:logic/pre_game/map_voting/update_counters_entity

execute as @a[team=!spectator,tag=!characterSelect] run function ssbrc:logic/spectate
execute as @a[team=waiting,tag=!characterPicked] run function ssbrc:logic/spectate

gamemode spectator @a[team=spectator]
team join temp @a[team=!spectator]
execute store result score #playersAll temp run team list temp
team empty temp

scoreboard players set $gameStage temp 2
scoreboard players set $countdown timer 31

tp @a 3.5 3.0 21.5 0.0 0.0

team join waiting @a[team=!spectator]
effect give @a[team=!spectator] minecraft:glowing 1000000 255 true

tag @a remove characterSelect
tag @a add mapRoom

title @a actionbar ""
